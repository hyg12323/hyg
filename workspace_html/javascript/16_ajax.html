<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <script>
        window.addEventListener('load', bind)
        function bind() {
            document.querySelector('#btn1')
                .addEventListener('click', function () {

                    // ajax 객체 생성
                    const xhr = new XMLHttpRequest();

                    // 보낼 준비
                    // 방식method, 주소
                    xhr.open('get', 'https://jsonplaceholder.typicode.com/users')

                    // 보내기
                    xhr.send()
                    // r
                    xhr.onload = function () {
                        console.log('다녀왔습니다')
                        //xhr.responseText : 응답 받은 내용이 담겨있음
                        console.log(xhr.responseText)
                        const data = JSON.parse(xhr.responseText)
                        console.log(data)
                        // 첫번째 사람
                        console.log(data[0])
                        console.log(data[0].username)
                        console.log(data[0]['username'])
                        console.log(data[0].address.geo.lat)
                    }
                })

            document.querySelector('#btn2')
                .addEventListener('click', function () {

                    const xhr = new XMLHttpRequest();

                    xhr.open('get', 'http://humanjobs.co.kr')
                    xhr.send()

                    xhr.onload = function () {
                        console.log(xhr.responseText)
                    }
                })

            document.querySelector('#btn3')
                .addEventListener('click', function () {
                    const serviceKey = 'dIF%2FpD%2FZPEsV7iAvKrlnxOEoEWAiq%2FJEStbsSqdxmHb7UVcdyXEe4TGW1hbIfx6Zn1U1JDq8l7IkUcWpIk5wZg%3D%3D'
                    let url = 'http://apis.data.go.kr/1360000/VilageFcstInfoService_2.0/getUltraSrtNcst'
                    url += '?serviceKey=' + serviceKey
                    url += '&numOfRows=1000'
                    url += '&pageNo=1'
                    url += '&dataType=JSON'
                    url += '&base_date=20250714'
                    url += '&base_time=1400'
                    url += '&nx=63'
                    url += '&ny=100'

                    const xhr = new XMLHttpRequest();

                    xhr.open('get', url)
                    xhr.send()

                    xhr.onload = function () {
                        console.log(xhr.responseText)
                        const data = JSON.parse(xhr.responseText)
                        console.log(data)
                    }
                })
            document.querySelector('#btn4')
                .addEventListener('click', function () {
                    const serviceKey = 'dIF%2FpD%2FZPEsV7iAvKrlnxOEoEWAiq%2FJEStbsSqdxmHb7UVcdyXEe4TGW1hbIfx6Zn1U1JDq8l7IkUcWpIk5wZg%3D%3D'
                    let url = 'http://apis.data.go.kr/1360000/VilageFcstInfoService_2.0/getUltraSrtFcst'
                    url += '?serviceKey=' + serviceKey
                    url += '&numOfRows=1000'
                    url += '&pageNo=1'
                    url += '&dataType=JSON'
                    url += '&base_date=20250714'
                    url += '&base_time=0930'
                    url += '&nx=63'
                    url += '&ny=100'

                    const xhr = new XMLHttpRequest();

                    xhr.open('get', url)
                    xhr.send()

                    xhr.onload = function () {
                        console.log(xhr.responseText)
                        const data = JSON.parse(xhr.responseText)
                        console.log(data)
                        console.log(data.response.body.items.item)
                      const xh1 = data.response.body.items.item;
                      console.log(xh1)
    
                     for(let i =0; i<xh1.length; i++){
                            console.log(xh1[i]) 
                            if(xh1[i].baseTime === "1900"){
                                console.log(xh1[i])
                            }        
                      
                     }
                    }
                })
                  document.querySelector('#btn5')
                .addEventListener('click', function () {
                    const serviceKey = 'dIF%2FpD%2FZPEsV7iAvKrlnxOEoEWAiq%2FJEStbsSqdxmHb7UVcdyXEe4TGW1hbIfx6Zn1U1JDq8l7IkUcWpIk5wZg%3D%3D'
                    let url = 'http://apis.data.go.kr/1360000/VilageFcstInfoService_2.0/getUltraSrtFcst'
                    url += '?serviceKey=' + serviceKey
                    url += '&numOfRows=1000'
                    url += '&pageNo=1'
                    url += '&dataType=JSON'
                    url += '&base_date=20250714'
                    url += '&base_time=0930'
                    url += '&nx=63'
                    url += '&ny=100'

                    const xhr = new XMLHttpRequest();

                    xhr.open('get', url)
                    xhr.send()

                    xhr.onload = function () {
                        // console.log(xhr.responseText)
                        const data = JSON.parse(xhr.responseText)
                        // console.log(data)
                        const item = data.response.body.items.item;
                        // console.log(data.response.body.items.item)
                    //   console.log(xh1)
                    for(let i=0; i<item.length; i++){
                      if ( item[i].category == 'T1H'){
                        // console.log(item[i])
                        console.log(item[i].baseTime, item[i].fcstValue)
                       /*
                       
                        <tr>
                            <th>1100</th>
                            <th>22</th>
                        </tr>
                       */
                        
                        document.querySelector('#tbody').innerHTML +=
                        `<tr>
                            <td>${item[i].fcstTime}</td>
                            <td>${item[i].fcstValue}</td>
                            
                        </tr>
                        `
                    
                        
                      }else if(item[i].category == 'RN1'){
                          // console.log(item[i])
                        console.log(item[i].fcstTime, item[i].fcstValue)
                      }

                    }
    
                   
                    

                    

                    }
                })
                document.querySelector('#btn6')
                .addEventListener('click',function(){
                    
                    const url = 'https://jsonplaceholder.typicode.com/users'
                    const option = {
                        mathod: 'get'
                    }
                    fetch(url,option)
                    .then(function(response){
                        return response.json()
                    }).then(function(data){

                        console.log(response)
                    }).catch(function(error)){
                        console.log(error)
                    }
                })
 
        }

        // document.querySelector('#btn4')
        // .addEventListener

    </script>
</head>

<body>
    <button type="button" id="btn1">ajax 실행</button>
    <button type="button" id="btn2">휴먼 잡스</button><br>
    <br>
    <button type="button" id="btn3">날 씨</button><br>
    <br><br>
    <button type="button" id="btn4">어제날씨</button><br>
    <br>
    <button type="button" id="btn5">선생님풀이</button> <br>
    <div>
        <table border="1">
            <thead>
                <tr>
                    <th>시간</th>
                    <th>온도</th>
                </tr>
            </thead>
            <table >
                <tbody id="tbody">
                    <tr>
                        <td>1100</td>
                        <td>22</td>
                    </tr>
                </tbody>
            </table>
            <tr>
                <td>1200</td>
                <td>22</td>
            </tr>
            <br>
            <button type="button" id="btn6">fetch</button> <br>
            
        </table>
    </div>


</body>

</html>